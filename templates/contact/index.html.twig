{% extends 'base.html.twig' %}

{% block title %}Formulaire de contact
{% endblock %}

{% block body %}
<div class="container-sm">
    <h1 class="text-center my-4">Votre demande</h1>

    {{ form_start(form) }}
    <div class="form-group my-3">
        Prénom:
        {{ form_widget(form.firstName, {'attr': {'class': 'form-control'}}) }}
        {{ form_errors(form.firstName) }}
    </div>

    <div class="form-group my-3">
        Nom:
        {{ form_widget(form.lastName, {'attr': {'class': 'form-control'}}) }}
        {{ form_errors(form.lastName) }}
    </div>

    <div class="form-group my-3">
        E-mail:
        {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
        {{ form_errors(form.email) }}
    </div>

    <div class="form-group my-3">
        Votre numéro de téléphone:
        {{ form_widget(form.phoneNumber, {'attr': {'class': 'form-control'}}) }}
        {{ form_errors(form.phoneNumber) }}
    </div>
    
    <div class="form-group my-3" id="formContent">
    Votre demande:
    {{ form_widget(form.content, {'attr': {'class': 'form-control'}, 'value': 'Annonce - Année: ' ~ form.vars.attr['data-year'] ~ ', Kilométrage: ' ~ form.vars.attr['data-kilometer'] ~ ', Prix: ' ~ form.vars.attr['data-price']}) }}
    {{ form_errors(form.content) }}
    </div>

    <button type="submit" class="btn btn-success my-3">Envoyer</button>
    </div>
    {{ form_end(form) }}

<script>

document.addEventListener('DOMContentLoaded', function() {
    var contactLink = document.getElementById('contact-link');
    var formContent = document.getElementById('formContent');

    contactLink.addEventListener('click', function(event) {
        event.preventDefault();

        if (contactLink.dataset.clicked === 'true') {
            var year = contactLink.getAttribute('data-year');
            var kilometer = contactLink.getAttribute('data-kilometer');
            var price = contactLink.getAttribute('data-price');

            formContent.value = 'Prix: ' + price + ', Année: ' + year + ', Kilométrage: ' + kilometer;
        }
    });

    contactLink.addEventListener('mousedown', function() {
        contactLink.dataset.clicked = 'true';
    });
});
</script>

	{% include 'menu/footer.html.twig' %}
{% endblock %}
